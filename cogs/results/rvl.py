import re

from .types import Module, ResultInfo, ConsoleErrorInfo, ConsoleErrorField, \
    BANNED_FIELD, WARNING_COLOR, UNKNOWN_CATEGORY_DESCRIPTION

"""
This file contains all currently known Wii result and error codes.
There may be inaccuracies here; we'll do our best to correct them
when we find out more about them.
"""

# 10000 range: games
game = Module('game', {
    # 10200 range: SSBB errors
    200: ResultInfo("SSBB: Invalid Profile ID."),
    201: ResultInfo("SSBB: No file (???)."),
    202: ResultInfo("SSBB: HTTP-GAMESTATS not responding or has sent an invalid response."),
    203: ResultInfo("SSBB: Invalid spectator SAKE file."),
    205: ResultInfo("SSBB: Spectator countdown is over."),
    206: ResultInfo("SSBB: Invalid submission response."),
    207: ResultInfo("SSBB: Invalid command."),
    208: ResultInfo("SSBB: Storage size is full (nand???)."),
    # 10300 range: MKWii errors
    312: ResultInfo("MKWii: RACE timeout."),
    313: ResultInfo("MKWii: Unknown error with rankings."),
    317: ResultInfo("MKWii: RACE did not answer an ranking download request."),
    323: ResultInfo("MKWii: Competition ghost data file ID is empty for all slots."),
    351: ResultInfo("MKWii: Ghost data does not exist on Wiimmfi."),
    363: ResultInfo("MKWii: SAKE did not send ghost data when requesting ghostdownload.aspx."),
    369: ResultInfo("MKWii: Invalid ghost data returned from SAKE."),
    387: ResultInfo("MKWii: Competition record upload failed because of timeout."),
    # 10600 range(?): Pokemon errors
    605: ResultInfo("Pokémon: No DNS record for pkgdsprod.nintendo.co.jp."),
    610: ResultInfo("Pokémon: DNS found, but connection failed."),
    625: ResultInfo("Pokémon: No DNS record for pkgdsprod.nintendo.co.jp."),
    10626: ResultInfo("Pokémon: No gamestats response at Wi-Fi Plaza."),
    # 11600 range: MHTri errors
    1601: ResultInfo("MHTri: Can't get IP to DNS record / servers down."),
    1602: ResultInfo("MHTri: Connection failed."),
    1603: ResultInfo("MHTri: Connection reset before SSL negotiation."),
    1604: ResultInfo("MHTri: SSL failed: Wrong CN."),
    1605: ResultInfo("MHTri: SSL failed: Wrong CA."),
    1606: ResultInfo("MHTri: SSL failed: Invalid Certificate chain."),
    1607: ResultInfo("MHTri: SSL failed: Certificate expired."),
    1609: ResultInfo("MHTri: Connection closed unexpectedly."),
    1611: ResultInfo("MHTri: Connection closed by server."),
    1612: ResultInfo("MHTri: Wrong data sent."),
    1613: ResultInfo("MHTri: Timeout while trying to connect."),
    1619: ResultInfo("MHTri: Timeout while waiting for data."),
    1669: ResultInfo("MHTri: NATNEG could not establish a P2P connection. Enable DMZ or port forward UDP 1024-65535."),
    1688: ResultInfo("MHTri: NATNEG could not establish a P2P connection. Enable DMZ or port forward UDP 1024-65535."),
    # 13200 range(?): Pokemon errors
    3206: ResultInfo("Pokémon: Pokémon Global Link has been discontinued (Generation 5)."),
    3212: ResultInfo("Pokémon: Global Link under maintenance."),
    3274: ResultInfo("Pokémon: Unknown GTS error."),
    3275: ResultInfo("Pokémon: Unknown GTS error.")
})

# 20000 range: NASWII errors
naswii = Module('naswii', {
    100: ResultInfo("Cannot connect to the Internet."),
    101: ResultInfo("Temporary GameSpy maintenance (availability check value has bit 2 set) / Response from NAS does not contain code."),
    102: ResultInfo("You are banned from Nintendo Wi-Fi Connection.", is_ban=True),
    103: ResultInfo("Console identifier broken (no valid base32 string) [User ID and MAC don't match]."),
    104: ResultInfo("Console identifier already in use by another console."),
    105: ResultInfo("Console identifier does not exist on server."),
    106: ResultInfo("Too many user IDs have been created on this console."),
    107: ResultInfo("GameID not supported."),
    108: ResultInfo("Console identifier / user account has been deleted."),
    109: ResultInfo("Invalid GameID."),
    110: ResultInfo("Server shutdown (NAS returned 110 or availability check value has bit 1 set)."),
    115: ResultInfo("Nintendo-variant of 23915 (console identifier abusing) or DWC_AUTHDATA broken."),
    3400: ResultInfo("Wiimmfi: Unable to connect. (Patch your game)"),
    3500: ResultInfo("Wiimmfi: Fatal server error."),
    3899: ResultInfo("Dolphin: Console registered, wait 7 days for activation."),
    3901: ResultInfo("Wiimmfi: Undergoing maintenance."),
    3902: ResultInfo("Wiimmfi: Server has too many users, try again later."),
    3903: ResultInfo("Wiimmfi: Console and profile creation disabled."),
    3904: ResultInfo("Wiimmfi: MKWii patch outdated."),
    3905: ResultInfo("Wiimmfi: MKWii payload is outdated. Restart Mario Kart Wii."),
    3906: ResultInfo("Reconnect denied."),
    3910: ResultInfo("Wiimmfi: Profile is permanently disabled."),
    3911: ResultInfo("Wiimmfi: Profile creation denied, try again in 24 hours."),
    3912: ResultInfo("Wiimmfi: Profile is permanently banned by Wiimmfi.", is_ban=True),
    3913: ResultInfo("Wiimmfi: Console creation denied, try again in 24 hours."),
    3914: ResultInfo("Wiimmfi: This console is permanently banned by Wiimmfi.", is_ban=True),
    3915: ResultInfo("Abuse of a console identifier."),
    3916: ResultInfo("Proxies are not allowed."),
    3917: ResultInfo("Wiimmfi: You are banned from Wiimmfi.", "Check ban reason and duration [here](http://wiimmfi.de/show-bans).", is_ban=True),
    3918: ResultInfo("Wiimmfi: Access denied. Dolphin NANDs are unable to be used."),
    3919: ResultInfo("Invalid profile ID."),
    3921: ResultInfo("Unknown console."),
    3922: ResultInfo("Wiimmfi: Game is not supported."),
    3923: ResultInfo("Wiimmfi: Game is disabled."),
    3924: ResultInfo("Incorrect GameID for current profile."),
    3927: ResultInfo("Mii name too short."),
    3928: ResultInfo("Forbidden Mii name."),
    3931: ResultInfo("Login failed."),
    3932: ResultInfo("Illegal HTTP header."),
    3933: ResultInfo("Missing required login parameter."),
    3934: ResultInfo("Invalid login parameter."),
    3935: ResultInfo("Unknown login action."),
    3941: ResultInfo("Missing required DLS1 parameter."),
    3942: ResultInfo("Unknown DLS1 action."),
    3943: ResultInfo("DLS1 file not found."),
    3971: ResultInfo("Wiimmfi: Don't use your own Ocarina codes."),
    3972: ResultInfo("Wiimmfi: Item cheats are not allowed in this region."),
    3973: ResultInfo("Wiimmfi: Region disabled - Mario Kart Wii."),
    3991: ResultInfo("Database error."),
    3998: ResultInfo("Wiimmfi: Not implemented yet (what does this even mean?)"),
    3999: ResultInfo("Internal error."),
    4110: ResultInfo("SVCLOC is down."),
    9000: ResultInfo("Cannot save Wi-Fi ID to NAND because it's full."),
    9001: ResultInfo("Cannot save Wi-Fi ID to NAND because it's damaged.")
})

# 30000 range: expanded feature error
feature = Module('Expanded feature', {
    1001: ResultInfo("Memory allocation failed."),
    1009: ResultInfo("Other fatal error."),
    1010: ResultInfo("Function cannot be called here."),
    1020: ResultInfo("Error with DLS1-Server - HTTP connection failed."),
    1030: ResultInfo("Received data is longer than receive buffer."),
    1101: ResultInfo("Illegal parameter."),
    1102: ResultInfo("Game code not registered or service closed."),
    1103: ResultInfo("Encryption key or hash value invalid."),
    1104: ResultInfo("Token expired (token is only valid for 24h)."),
    1105: ResultInfo("Content(s) do not exist."),
    1106: ResultInfo("Attribute does not match."),
    1107: ResultInfo("Time limit expired during content request."),
    1108: ResultInfo("Access from an AP which is not service target."),
    1109: ResultInfo("Cannot connect to DLS1 database."),
    1110: ResultInfo("Password invalid."),
    1111: ResultInfo("Illegal parameter - possibly a damaged cartridge / disc."),
    2001: ResultInfo("Cannot connect to update server."),
    2002: ResultInfo("Connection aborted during update / Nintendo WFC could be experiencing high traffic volumes."),
    2003: ResultInfo("Wii system storage is full."),
    2004: ResultInfo("Internal error - contents invalid or NAND damaged."),
    2005: ResultInfo("ES library returned an error between -1001 and -1007."),
    2006: ResultInfo("NUP 6000-level error (NAND library error)."),
    2007: ResultInfo("NUP 7000-level error (NHTTP library error)."),
    3001: ResultInfo("Some failure has occurred on the server; a check is not possible."),
    3010: ResultInfo("NHTTP returned a connection error."),
    3020: ResultInfo("Either the HTTP response was not \"200 OK\" (e. g. naswii/pr returned wrong HTTP status), the body cannot parsed properly, or the indicated entry count doesn't match the received entry count."),
    3030: ResultInfo("An error has occurred for some other reason. - NAND read error or Auth libraray 20100 error."),
    3100: ResultInfo("One or more strings are invalid."),
    3101: ResultInfo("Too many words to check.")
})

# 40000 range: Unknown
unknown: Module('unknown', {
    104: ResultInfo("MKWii: No ghost data is present."),
    225: ResultInfo("Wii Speak Channel: SAKE Fail at CreateRecord."),
    263: ResultInfo("Trackmania: SAKE fail (FieldNotFound)."),
    501: ResultInfo("Fatal communication error - invalid SAKE file size."),
    601: ResultInfo("Fatal communication error - invalid response code."),
    460: ResultInfo("SAKE login ticket expired - reconnect to WFC."),
    673: ResultInfo("SAKE File upload error."),
    755: ResultInfo("SAKE did not answer or the response was invalid."),
    756: ResultInfo("A value in the response was invalid (SAKE)."),
    2003: ResultInfo("PEERCHAT error.")
})

# 50000 range: Connection errors
# prepare for a lot of identical text :P
network: Module('network (Internet)', {
    0: ResultInfo("NDS: Connection 1: No access point in range."),
    1: ResultInfo("NDS: Connection 2: No access point in range."),
    2: ResultInfo("NDS: Connection 3: No access point in range."),
    3: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: No access point in range."),
    10: ResultInfo("DSi: Connection 4: No access point in range."),
    11: ResultInfo("DSi: Connection 5: No access point in range."),
    12: ResultInfo("DSi: Connection 6: No access point in range."),
    20: ResultInfo("Wii: Wi-Fi Connection 1: No access point in range."),
    21: ResultInfo("Wii: Wi-Fi Connection 2: No access point in range."),
    22: ResultInfo("Wii: Wi-Fi Connection 3: No access point in range."),
    40: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No access point in range."),
    41: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No access point in range."),
    42: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No access point in range."),
    100: ResultInfo("NDS: Connection 1: No Internet connection or connection interrupted."),
    101: ResultInfo("NDS: Connection 2: No Internet connection or connection interrupted."),
    102: ResultInfo("NDS: Connection 3: No Internet connection or connection interrupted."),
    103: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: No Internet connection or connection interrupted."),
    110: ResultInfo("DSi: Connection 4: No Internet connection or connection interrupted."),
    111: ResultInfo("DSi: Connection 5: No Internet connection or connection interrupted."),
    112: ResultInfo("DSi: Connection 6: No Internet connection or connection interrupted."),
    120: ResultInfo("Wii: Wi-Fi Connection 1: No Internet connection or connection interrupted."),
    121: ResultInfo("Wii: Wi-Fi Connection 2: No Internet connection or connection interrupted."),
    122: ResultInfo("Wii: Wi-Fi Connection 3: No Internet connection or connection interrupted."),
    130: ResultInfo("Wii: Ethernet Connection 1: No Internet connection or connection interrupted."),
    131: ResultInfo("Wii: Ethernet Connection 2: No Internet connection or connection interrupted."),
    132: ResultInfo("Wii: Ethernet Connection 3: No Internet connection or connection interrupted."),
    140: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No Internet connection or connection interrupted."),
    141: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No Internet connection or connection interrupted."),
    142: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No Internet connection or connection interrupted."),
    200: ResultInfo("NDS: Connection 1: No Internet settings available."),
    201: ResultInfo("NDS: Connection 2: No Internet settings available."),
    202: ResultInfo("NDS: Connection 3: No Internet settings available."),
    203: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: No Internet settings available."),
    210: ResultInfo("DSi: Connection 4: No Internet settings available."),
    211: ResultInfo("DSi: Connection 5: No Internet settings available."),
    212: ResultInfo("DSi: Connection 6: No Internet settings available."),
    220: ResultInfo("Wii: Wi-Fi Connection 1: No Internet settings available."),
    221: ResultInfo("Wii: Wi-Fi Connection 2: No Internet settings available."),
    222: ResultInfo("Wii: Wi-Fi Connection 3: No Internet settings available."),
    230: ResultInfo("Wii: Ethernet Connection 1: No Internet settings available."),
    231: ResultInfo("Wii: Ethernet Connection 2: No Internet settings available."),
    232: ResultInfo("Wii: Ethernet Connection 3: No Internet settings available."),
    240: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No Internet settings available."),
    241: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No Internet settings available."),
    242: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: No Internet settings available."),
    300: ResultInfo("NDS: Connection 1: Invalid Internet settings."),
    301: ResultInfo("NDS: Connection 2: Invalid Internet settings."),
    302: ResultInfo("NDS: Connection 3: Invalid Internet settings."),
    303: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Invalid Internet settings."),
    310: ResultInfo("DSi: Connection 4: Invalid Internet settings."),
    311: ResultInfo("DSi: Connection 5: Invalid Internet settings."),
    312: ResultInfo("DSi: Connection 6: Invalid Internet settings."),
    320: ResultInfo("Wii: Wi-Fi Connection 1: Invalid Internet settings."),
    321: ResultInfo("Wii: Wi-Fi Connection 2: Invalid Internet settings."),
    322: ResultInfo("Wii: Wi-Fi Connection 3: Invalid Internet settings."),
    330: ResultInfo("Wii: Ethernet Connection 1: Invalid Internet settings."),
    331: ResultInfo("Wii: Ethernet Connection 2: Invalid Internet settings."),
    332: ResultInfo("Wii: Ethernet Connection 3: Invalid Internet settings."),
    340: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Invalid Internet settings."),
    341: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Invalid Internet settings."),
    342: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Invalid Internet settings."),
    403: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: LAN adapter broken or not connected."),
    430: ResultInfo("Wii: Ethernet Connection 1: LAN adapter broken or not connected."),
    431: ResultInfo("Wii: Ethernet Connection 2: LAN adapter broken or not connected."),
    432: ResultInfo("Wii: Ethernet Connection 3: LAN adapter broken or not connected."),
    440: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: LAN adapter broken or not connected."),
    441: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: LAN adapter broken or not connected."),
    442: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: LAN adapter broken or not connected."),
    599: ResultInfo("DSi: Nintendo DSi Network Services Agreement not accepted."),
    699: ResultInfo("DSi: Wireless Communications disabled."),
    1000: ResultInfo("NDS: Connection 1: Access Point not found."),
    1001: ResultInfo("NDS: Connection 2: Access Point not found."),
    1002: ResultInfo("NDS: Connection 3: Access Point not found."),
    1003: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Access Point not found."),
    1010: ResultInfo("DSi: Connection 4: Access Point not found."),
    1011: ResultInfo("DSi: Connection 5: Access Point not found."),
    1012: ResultInfo("DSi: Connection 6: Access Point not found."),
    1020: ResultInfo("Wii: Wi-Fi Connection 1: Access Point not found."),
    1021: ResultInfo("Wii: Wi-Fi Connection 2: Access Point not found."),
    1022: ResultInfo("Wii: Wi-Fi Connection 3: Access Point not found."),
    1040: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Access Point not found."),
    1041: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Access Point not found."),
    1042: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Access Point not found."),
    1100: ResultInfo("NDS: Connection 1: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1101: ResultInfo("NDS: Connection 2: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1102: ResultInfo("NDS: Connection 3: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1103: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1110: ResultInfo("DSi: Connection 4: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1111: ResultInfo("DSi: Connection 5: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1112: ResultInfo("DSi: Connection 6: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1120: ResultInfo("Wii: Wi-Fi Connection 1: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1121: ResultInfo("Wii: Wi-Fi Connection 2: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1122: ResultInfo("Wii: Wi-Fi Connection 3: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1140: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1141: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1142: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: WEP key is incorrect or Wi-Fi channel has a lot of interference."),
    1200: ResultInfo("NDS: Connection 1: Maximum simultaneous connection to the AP surpassed."),
    1201: ResultInfo("NDS: Connection 2: Maximum simultaneous connection to the AP surpassed."),
    1202: ResultInfo("NDS: Connection 3: Maximum simultaneous connection to the AP surpassed."),
    1203: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Maximum simultaneous connection to the AP surpassed."),
    1210: ResultInfo("DSi: Connection 4: Maximum simultaneous connection to the AP surpassed."),
    1211: ResultInfo("DSi: Connection 5: Maximum simultaneous connection to the AP surpassed."),
    1212: ResultInfo("DSi: Connection 6: Maximum simultaneous connection to the AP surpassed."),
    1230: ResultInfo("Wii: Ethernet Connection 1: Maximum simultaneous connection to the AP surpassed."),
    1231: ResultInfo("Wii: Ethernet Connection 2: Maximum simultaneous connection to the AP surpassed."),
    1232: ResultInfo("Wii: Ethernet Connection 3: Maximum simultaneous connection to the AP surpassed."),
    1240: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Maximum simultaneous connection to the AP surpassed."),
    1241: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Maximum simultaneous connection to the AP surpassed."),
    1242: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Maximum simultaneous connection to the AP surpassed."),
    1300: ResultInfo("NDS: Connection 1: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1301: ResultInfo("NDS: Connection 2: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1302: ResultInfo("NDS: Connection 3: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1303: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1310: ResultInfo("DSi: Connection 4: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1311: ResultInfo("DSi: Connection 5: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1312: ResultInfo("DSi: Connection 6: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1320: ResultInfo("Wii: Wi-Fi Connection 1: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1321: ResultInfo("Wii: Wi-Fi Connection 2: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1322: ResultInfo("Wii: Wi-Fi Connection 3: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1340: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1341: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1342: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to access point failed. Password incorrect or incompatible 802.11 mode is set (Wi-Fi)."),
    1403: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    1430: ResultInfo("Wii: Ethernet Connection 1: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    1431: ResultInfo("Wii: Ethernet Connection 2: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    1432: ResultInfo("Wii: Ethernet Connection 3: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    1440: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    1441: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    1442: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to router failed. Incompatible LAN Adapter or check if a MAC filter is enabled or restart console (LAN)."),
    2000: ResultInfo("NDS: Connection 1: DHCP failed."),
    2001: ResultInfo("NDS: Connection 2: DHCP failed."),
    2002: ResultInfo("NDS: Connection 3: DHCP failed."),
    2003: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: DHCP failed."),
    2010: ResultInfo("DSi: Connection 4: DHCP failed."),
    2011: ResultInfo("DSi: Connection 5: DHCP failed."),
    2012: ResultInfo("DSi: Connection 6: DHCP failed."),
    2020: ResultInfo("Wii: Wi-Fi Connection 1: DHCP failed."),
    2021: ResultInfo("Wii: Wi-Fi Connection 2: DHCP failed."),
    2022: ResultInfo("Wii: Wi-Fi Connection 3: DHCP failed."),
    2030: ResultInfo("Wii: Ethernet Connection 1: DHCP failed."),
    2031: ResultInfo("Wii: Ethernet Connection 2: DHCP failed."),
    2032: ResultInfo("Wii: Ethernet Connection 3: DHCP failed."),
    2040: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: DHCP failed."),
    2041: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: DHCP failed."),
    2042: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: DHCP failed."),
    2100: ResultInfo("NDS: Connection 1: DNS failed."),
    2101: ResultInfo("NDS: Connection 2: DNS failed."),
    2102: ResultInfo("NDS: Connection 3: DNS failed."),
    2103: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: DNS failed."),
    2110: ResultInfo("DSi: Connection 4: DNS failed."),
    2111: ResultInfo("DSi: Connection 5: DNS failed."),
    2112: ResultInfo("DSi: Connection 6: DNS failed."),
    2120: ResultInfo("Wii: Wi-Fi Connection 1: DNS failed."),
    2121: ResultInfo("Wii: Wi-Fi Connection 2: DNS failed."),
    2122: ResultInfo("Wii: Wi-Fi Connection 3: DNS failed."),
    2130: ResultInfo("Wii: Ethernet Connection 1: DNS failed."),
    2131: ResultInfo("Wii: Ethernet Connection 2: DNS failed."),
    2132: ResultInfo("Wii: Ethernet Connection 3: DNS failed."),
    2140: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: DNS failed."),
    2141: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: DNS failed."),
    2142: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: DNS failed."),
    2200: ResultInfo("NDS: Connection 1: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2201: ResultInfo("NDS: Connection 2: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2202: ResultInfo("NDS: Connection 3: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2203: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2210: ResultInfo("DSi: Connection 4: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2211: ResultInfo("DSi: Connection 5: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2212: ResultInfo("DSi: Connection 6: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2220: ResultInfo("Wii: Wi-Fi Connection 1: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2221: ResultInfo("Wii: Wi-Fi Connection 2: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2222: ResultInfo("Wii: Wi-Fi Connection 3: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2230: ResultInfo("Wii: Ethernet Connection 1: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2231: ResultInfo("Wii: Ethernet Connection 2: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2232: ResultInfo("Wii: Ethernet Connection 3: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2240: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2241: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2242: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection test failed - http://conntest.nintendowifi.net returned neither 200 nor 302, timed out, or proxy not reachable."),
    2300: ResultInfo("NDS: Connection 1: Couldn't create new account at the authentication server."),
    2301: ResultInfo("NDS: Connection 2: Couldn't create new account at the authentication server."),
    2302: ResultInfo("NDS: Connection 3: Couldn't create new account at the authentication server."),
    2303: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Couldn't create new account at the authentication server."),
    2310: ResultInfo("DSi: Connection 4: Couldn't create new account at the authentication server."),
    2311: ResultInfo("DSi: Connection 5: Couldn't create new account at the authentication server."),
    2312: ResultInfo("DSi: Connection 6: Couldn't create new account at the authentication server."),
    2320: ResultInfo("Wii: Wi-Fi Connection 1: Couldn't create new account at the authentication server."),
    2321: ResultInfo("Wii: Wi-Fi Connection 2: Couldn't create new account at the authentication server."),
    2322: ResultInfo("Wii: Wi-Fi Connection 3: Couldn't create new account at the authentication server."),
    2330: ResultInfo("Wii: Ethernet Connection 1: Couldn't create new account at the authentication server."),
    2331: ResultInfo("Wii: Ethernet Connection 2: Couldn't create new account at the authentication server."),
    2332: ResultInfo("Wii: Ethernet Connection 3: Couldn't create new account at the authentication server."),
    2340: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Couldn't create new account at the authentication server."),
    2341: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Couldn't create new account at the authentication server."),
    2342: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Couldn't create new account at the authentication server."),
    2400: ResultInfo("NDS: Connection 1: Connection to proxy failed."),
    2401: ResultInfo("NDS: Connection 2: Connection to proxy failed."),
    2402: ResultInfo("NDS: Connection 3: Connection to proxy failed."),
    2403: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Connection to proxy failed."),
    2410: ResultInfo("DSi: Connection 4: Connection to proxy failed."),
    2411: ResultInfo("DSi: Connection 5: Connection to proxy failed."),
    2412: ResultInfo("DSi: Connection 6: Connection to proxy failed."),
    2420: ResultInfo("Wii: Wi-Fi Connection 1: Connection to proxy failed."),
    2421: ResultInfo("Wii: Wi-Fi Connection 2: Connection to proxy failed."),
    2422: ResultInfo("Wii: Wi-Fi Connection 3: Connection to proxy failed."),
    2430: ResultInfo("Wii: Ethernet Connection 1: Connection to proxy failed."),
    2431: ResultInfo("Wii: Ethernet Connection 2: Connection to proxy failed."),
    2432: ResultInfo("Wii: Ethernet Connection 3: Connection to proxy failed."),
    2440: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to proxy failed."),
    2441: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to proxy failed."),
    2442: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Connection to proxy failed."),
    2500: ResultInfo("NDS: Connection 1: Incorrect proxy credentials."),
    2501: ResultInfo("NDS: Connection 2: Incorrect proxy credentials."),
    2502: ResultInfo("NDS: Connection 3: Incorrect proxy credentials."),
    2503: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Incorrect proxy credentials."),
    2510: ResultInfo("DSi: Connection 4: Incorrect proxy credentials."),
    2511: ResultInfo("DSi: Connection 5: Incorrect proxy credentials."),
    2512: ResultInfo("DSi: Connection 6: Incorrect proxy credentials."),
    2520: ResultInfo("Wii: Wi-Fi Connection 1: Incorrect proxy credentials."),
    2521: ResultInfo("Wii: Wi-Fi Connection 2: Incorrect proxy credentials."),
    2522: ResultInfo("Wii: Wi-Fi Connection 3: Incorrect proxy credentials."),
    2530: ResultInfo("Wii: Ethernet Connection 1: Incorrect proxy credentials."),
    2531: ResultInfo("Wii: Ethernet Connection 2: Incorrect proxy credentials."),
    2532: ResultInfo("Wii: Ethernet Connection 3: Incorrect proxy credentials."),
    2540: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Incorrect proxy credentials."),
    2541: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Incorrect proxy credentials."),
    2542: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Incorrect proxy credentials."),
    2600: ResultInfo("NDS: Connection 1: Technical error."),
    2601: ResultInfo("NDS: Connection 2: Technical error."),
    2602: ResultInfo("NDS: Connection 3: Technical error."),
    2603: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Technical error."),
    2610: ResultInfo("DSi: Connection 4: Technical error."),
    2611: ResultInfo("DSi: Connection 5: Technical error."),
    2612: ResultInfo("DSi: Connection 6: Technical error."),
    2620: ResultInfo("Wii: Wi-Fi Connection 1: Technical error."),
    2621: ResultInfo("Wii: Wi-Fi Connection 2: Technical error."),
    2622: ResultInfo("Wii: Wi-Fi Connection 3: Technical error."),
    2630: ResultInfo("Wii: Ethernet Connection 1: Technical error."),
    2631: ResultInfo("Wii: Ethernet Connection 2: Technical error."),
    2632: ResultInfo("Wii: Ethernet Connection 3: Technical error."),
    2640: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Technical error."),
    2641: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Technical error."),
    2642: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Technical error."),
    2700: ResultInfo("NDS: Connection 1: IP address conflict."),
    2701: ResultInfo("NDS: Connection 2: IP address conflict."),
    2702: ResultInfo("NDS: Connection 3: IP address conflict."),
    2703: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: IP address conflict."),
    2710: ResultInfo("DSi: Connection 4: IP address conflict."),
    2711: ResultInfo("DSi: Connection 5: IP address conflict."),
    2712: ResultInfo("DSi: Connection 6: IP address conflict."),
    2720: ResultInfo("Wii: Wi-Fi Connection 1: IP address conflict."),
    2721: ResultInfo("Wii: Wi-Fi Connection 2: IP address conflict."),
    2722: ResultInfo("Wii: Wi-Fi Connection 3: IP address conflict."),
    2730: ResultInfo("Wii: Ethernet Connection 1: IP address conflict."),
    2731: ResultInfo("Wii: Ethernet Connection 2: IP address conflict."),
    2732: ResultInfo("Wii: Ethernet Connection 3: IP address conflict."),
    2740: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: IP address conflict."),
    2741: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: IP address conflict."),
    2742: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: IP address conflict."),
    3000: ResultInfo("NDS: Connection 1: Auth server error during hotspot authentication."),
    3001: ResultInfo("NDS: Connection 2: Auth server error during hotspot authentication."),
    3002: ResultInfo("NDS: Connection 3: Auth server error during hotspot authentication."),
    3003: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Auth server error during hotspot authentication."),
    3010: ResultInfo("DSi: Connection 4: Auth server error during hotspot authentication."),
    3011: ResultInfo("DSi: Connection 5: Auth server error during hotspot authentication."),
    3012: ResultInfo("DSi: Connection 6: Auth server error during hotspot authentication."),
    3020: ResultInfo("Wii: Wi-Fi Connection 1: Auth server error during hotspot authentication."),
    3021: ResultInfo("Wii: Wi-Fi Connection 2: Auth server error during hotspot authentication."),
    3022: ResultInfo("Wii: Wi-Fi Connection 3: Auth server error during hotspot authentication."),
    3030: ResultInfo("Wii: Ethernet Connection 1: Auth server error during hotspot authentication."),
    3031: ResultInfo("Wii: Ethernet Connection 2: Auth server error during hotspot authentication."),
    3032: ResultInfo("Wii: Ethernet Connection 3: Auth server error during hotspot authentication."),
    3040: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Auth server error during hotspot authentication."),
    3041: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Auth server error during hotspot authentication."),
    3042: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Auth server error during hotspot authentication."),
    3100: ResultInfo("NDS: Connection 1: Hotspot authentication server error."),
    3101: ResultInfo("NDS: Connection 2: Hotspot authentication server error."),
    3102: ResultInfo("NDS: Connection 3: Hotspot authentication server error."),
    3103: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Hotspot authentication server error."),
    3110: ResultInfo("DSi: Connection 4: Hotspot authentication server error."),
    3111: ResultInfo("DSi: Connection 5: Hotspot authentication server error."),
    3112: ResultInfo("DSi: Connection 6: Hotspot authentication server error."),
    3120: ResultInfo("Wii: Wi-Fi Connection 1: Hotspot authentication server error."),
    3121: ResultInfo("Wii: Wi-Fi Connection 2: Hotspot authentication server error."),
    3122: ResultInfo("Wii: Wi-Fi Connection 3: Hotspot authentication server error."),
    3130: ResultInfo("Wii: Ethernet Connection 1: Hotspot authentication server error."),
    3131: ResultInfo("Wii: Ethernet Connection 2: Hotspot authentication server error."),
    3132: ResultInfo("Wii: Ethernet Connection 3: Hotspot authentication server error."),
    3140: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Hotspot authentication server error."),
    3141: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Hotspot authentication server error."),
    3142: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Hotspot authentication server error."),
    3200: ResultInfo("NDS: Connection 1: Hotspot authentication failed."),
    3201: ResultInfo("NDS: Connection 2: Hotspot authentication failed."),
    3202: ResultInfo("NDS: Connection 3: Hotspot authentication failed."),
    3203: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: Hotspot authentication failed."),
    3210: ResultInfo("DSi: Connection 4: Hotspot authentication failed."),
    3211: ResultInfo("DSi: Connection 5: Hotspot authentication failed."),
    3212: ResultInfo("DSi: Connection 6: Hotspot authentication failed."),
    3220: ResultInfo("Wii: Wi-Fi Connection 1: Hotspot authentication failed."),
    3221: ResultInfo("Wii: Wi-Fi Connection 2: Hotspot authentication failed."),
    3222: ResultInfo("Wii: Wi-Fi Connection 3: Hotspot authentication failed."),
    3230: ResultInfo("Wii: Ethernet Connection 1: Hotspot authentication failed."),
    3231: ResultInfo("Wii: Ethernet Connection 2: Hotspot authentication failed."),
    3232: ResultInfo("Wii: Ethernet Connection 3: Hotspot authentication failed."),
    3240: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Hotspot authentication failed."),
    3241: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Hotspot authentication failed."),
    3242: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: Hotspot authentication failed."),
    4000: ResultInfo("NDS: Connection 1: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4001: ResultInfo("NDS: Connection 2: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4002: ResultInfo("NDS: Connection 3: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4003: ResultInfo("NDS: Nintendo Wi-Fi USB Connector: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4010: ResultInfo("DSi: Connection 4: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4011: ResultInfo("DSi: Connection 5: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4012: ResultInfo("DSi: Connection 6: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4020: ResultInfo("Wii: Wi-Fi Connection 1: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4021: ResultInfo("Wii: Wi-Fi Connection 2: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4022: ResultInfo("Wii: Wi-Fi Connection 3: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4030: ResultInfo("Wii: Ethernet Connection 1: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4031: ResultInfo("Wii: Ethernet Connection 2: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4032: ResultInfo("Wii: Ethernet Connection 3: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4040: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4041: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: LAN Adapter broken or not connected, or quality of internet connection is extremely poor."),
    4042: ResultInfo("Wii: Nintendo Wi-Fi USB Connector: LAN Adapter broken or not connected, or quality of internet connection is extremely poor.")
})

# 60000 range: server error during login
gamespy = Module('gamespy (game servers)', {
    0: ResultInfo("Unknown profile."),
    1010: ResultInfo("A communication error occurred while logging into the GameSpy GP server - Timeout."),
    1020: ResultInfo("GameSpy Maintenance."),
    1070: ResultInfo("A login timeout error occurred while logging into the GameSpy SP server."),
    7010: ResultInfo("Game socket UDP port already in use.")
})

# 70000 range: server error during friend management
friends = Module('friends', {
    1010: ResultInfo("A communication error with the GameSpy GP server occurred while synchronizing the Wii friend roster - Timeout."),
    4030: ResultInfo("MASTER is down (%s.master.gs.wiimmfi.de)")
})

# 80000 range: server error during matchmaking
matchmaking: Module('matchmaking', {
    430: ResultInfo("Host has not entered FC or friend has disconnected from WFC (Wiimmfi: OPENHOST does not work for this game)"),
    1010: ResultInfo("A communication error with the GameSpy GP server occurred during matchmaking - Timeout."),
    1020: ResultInfo("A communication error with the GameSpy GP server occurred during matchmaking."),
    4020: ResultInfo("Communication was stopped from the GameSpy MASTER server during matchmaking - MASTER server down or UDP packets are being blocked."),
    5010: ResultInfo("MS is down (%s.ms%d.gs.wiimmfi.de)."),
    5020: ResultInfo("A communication error occurred with the GameSpy MASTER server."),
    5030: ResultInfo("A communication error with the GameSpy MS server occurred during matchmaking."),
    5040: ResultInfo("A communication error occurred with the GameSpy MS server."),
    6020: ResultInfo("NATNEG is down (%s.natneg%d.gs.wiimmfi.de)."),
    6030: ResultInfo("No DNS answer for NATNEG."),
    6070: ResultInfo("CONNECT_PING NATNEG packets between players did not arrive (might happen in some games)."),
    6420: ResultInfo("NATNEG could not establish a P2P connection. Enable DMZ or port forward UDP 1024-65535 or 22000-22999 (Mario Kart Wii only)."),
})

# 90000 range: other server errors
server_other: Module('server (other)', {
    40: ResultInfo("GAMESTATS data invalid."),
    1010: ResultInfo("Disconnected from the GPCM server."),
    2020: ResultInfo("Error with TCP-gamestats."),
    2030: ResultInfo("Error with TCP-gamestats."),
    2040: ResultInfo("Failed to recieve session key (lc2) - error with TCP-gamestats."),
    2050: ResultInfo("Error with HTTP-gamestats."),
    2070: ResultInfo("Failed to recieve challenge (lc1) - error with TCP-gamestats."),
    2200: ResultInfo("Failed to authenticate player."),
    4020: ResultInfo("Communication was stopped from the GameSpy MASTER server during matchmaking."),
    4030: ResultInfo("A communication error with the GameSpy MASTER server occurred during matchmaking."),
    5010: ResultInfo("MS timeout."),
    7003: ResultInfo("A socket error occurred at a layer below the DWC after matchmaking completed."),
    7640: ResultInfo("Socket closed by GT2 library."),
    8020: ResultInfo("Error with HTTP-gamestats."),
    8840: ResultInfo("SAKE file size mismatch."),
    8850: ResultInfo("Error occurred while downloading data."),
    8860: ResultInfo("SAKE timeout."),
    8870: ResultInfo("Error with HTTP-gamestats/SAKE.")
})

# We have some modules partially documented, those that aren't have dummy Modules.
modules = {
    10000: game,
    20000: naswii,
    30000: feature,
    40000: unknown,
    50000: network,
    60000: gamespy,
    70000: friends,
    80000: matchmaking,
    90000: server_other
}


# regex for Wii U result code format "1XX-YYYY"
RE = re.compile(r'\d{1,2}\d{4}')

CONSOLE_NAME = 'Nintendo Wii U'

# Suggested color to use if displaying information through a Discord bot's embed
COLOR = 0x009AC7


def is_valid(error):
    return RE.match(error)


def construct_support(ret, mod, desc):
    category = modules.get(mod, Module(''))
    if category.name:
        ret.add_field(ConsoleErrorField('Category', message_str=category.name))
    else:
        ret.add_field(ConsoleErrorField('Category', supplementary_value=mod))
    summary = category.get_summary(desc)
    if summary:
        ret.add_field(ConsoleErrorField('Summary', message_str=summary))
    description = category.get_error(desc)
    if description is not None and description.description:
        ret.add_field(ConsoleErrorField('Description', message_str=description.description))
        if description.support_url:
            ret.add_field(ConsoleErrorField('Further information', message_str=description.support_url))
        if description.is_ban:
            ret.add_field(BANNED_FIELD)
            ret.color = WARNING_COLOR
    else:
        ret.add_field(UNKNOWN_CATEGORY_DESCRIPTION)
    return ret


def get(error):
    mod = int(error[:2] if len(error) == 6 else error[:1])
    desc = int(error[4:])
    ret = ConsoleErrorInfo(error, CONSOLE_NAME, COLOR)
    return construct_support(ret, mod, desc)
